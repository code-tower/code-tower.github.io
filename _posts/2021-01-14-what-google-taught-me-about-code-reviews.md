---
layout: post
title: "Google이 코드 검토를 수행하는 방법 – Google 문서의 품질 보증 팁
 "
author: 'Code Tower'
thumbnail: https://www.freecodecamp.org/news/content/images/size/w600/2021/01/Google.png
tags: undefined
---


코드 품질 보증이라고도하는 코드 검토는 코드를 작성한 후 다른 사람이 코드를 확인하도록하는 관행입니다.
 

코드 검토는 소프트웨어 작성 및 제공 프로세스에 많은 이점을 제공합니다.
 

- 코드베이스를 통해 일관성을 보장합니다.
 
- 리뷰의 모든 구성원을 교육합니다 (지식 전달을 돕습니다).
 
- 팀의 다른 부분에 영향을 미칠 수있는 상황에 대한 인식을 구축합니다.
 
- 빌드 중단 방지
 
- 코드 변경에 대한 새로운 시선을 던져 변경의 최적화 및 단순화를 검색합니다.
 
- 품질을 촉진하고 누구도 잊어 버리거나 놓친 것이 없도록합니다.
 

Google은 GitHub에 여러 언어로 된 1,918 개의 저장소를 보유하고 있으며, 그 이상은 오픈 소스가 아닙니다.
 

코드베이스 중 하나는 25,000 명 이상의 Google 직원이 공유하며 일반적으로 매일 40,000 건의 커밋을 수행합니다 (인간 변경 16,000 건, 자동화 시스템의 경우 24,000 건).
 매일 사용량이 많은 시간에 초당 약 800,000 개의 쿼리를 처리해야합니다.
 

Google은 엔지니어링 관행을 게시 했으므로 하루에 많은 커밋을 통해 규모에 맞게 코드를 검토하는 방법을 살펴 보겠습니다.
 

Google은 코드베이스의 변경을 변경 목록을 나타내는 CL이라고합니다.
 검토를 거치는 작업 단위 / 코드 조각 일뿐입니다.
 

첫째, 코드 검토 프로세스에 대해 생각하기 전에 검토를 수행 할 사람에 집중하십시오.
 주제별 전문가를 선택하십시오.
 이 코드베이스 또는 코드베이스 영역에 익숙한 사람을 선택하십시오.
 

때때로 이것은 다른 사람들이 코드의 다른 부분을 검토하도록하는 것을 의미 할 수도 있습니다.
 그러나 Google의 코드 리뷰 중 25 % 미만의 리뷰어가 두 명 이상 있습니다.
 

누군가가 적시에 응답하도록하는 것도 중요합니다.
 병목 현상과 개인 과부하를 방지하기 위해 CC 검토 자만 변경 사항에 대해 원하는 경우 편리하게 검토 할 수 있습니다.
 

코드 검토는 신속하게 완료되어야합니다.
 검토를위한 최대 시간은 영업일 기준 1 일이어야합니다.
 

왜 긴급합니까?
 개인적으로 QA를받는 데 몇 주 이상 걸리는 경우가 있습니다.
 

- 차단제가됩니다.
 코드 작성자가 새로운 작업으로 이동하더라도 새로운 변경 사항이 백 로그를 형성하기 시작하고 지연은 최대 몇 주 또는 몇 달까지 누적 될 수 있습니다.
 
- 개발자는 좌절감을 느낍니다.
 검토자가 주요 변경 사항을 요청했지만 3 일마다 응답하는 경우 해당 변경 작업을 수행하는 개발자에게 실망 스럽습니다.
 그러나 빠른 응답으로 정확히 무엇을해야하는지에 대한 설명이 필요할 때마다 좌절감이 사라집니다.
 
- 코드 품질이 저하 될 수 있습니다.
 리뷰가 항상 느리면 개발자가 코드 정리, 리팩토링 작업 또는 일반적인 코드 개선 ( "리뷰어가 4 일 동안 답장하지 않으면 요점은 무엇입니까?") 및 제출 된 코드 품질이 낮습니다.
 리뷰가 내려갈 가능성이 더 높습니다.
 

코드 검토가 빠를 수있는 주된 이유는 크기가 작기 때문입니다.
 1,000 행 CL을 보내는 대신 여러 CL로 분리되어 예를 들어 100 행 중 10 개의 작은 변경 사항을 푸시합니다.
 

Google은 또한 프로덕션의 주요 문제를 해결하기 위해 신속하게 코드를 변경해야하는 긴급 상황이 있습니다.
 이 경우 코드 품질이 완화됩니다.
 이 검토는 즉시 검토 자의 최우선 순위가되어야합니다.
 궁금한 점이 있다면 Google이 여기에 직면 한 몇 가지 긴급 상황의 예가 있습니다.
 

## Google의 코드 검토 표준
 

Google이 강조하는 핵심 규칙은 다음과 같습니다.
 

검토자는 일반적으로 변경 사항이 완벽하지 않더라도 전체 코드 상태가 확실히 개선되면 승인해야합니다.
 

구글이 만드는 핵심 포인트는 완벽한 코드가 존재하지 않는다는 것입니다.
 그것이 더 나아진다면 충분합니다.
 

그것은 확실히 더 나은 것과 그것이 얼마나 더 좋을 수 있는지 사이의 균형 잡힌 행동입니다.
 상당한 개선을 위해 더 많은 피드백을 추가 할 수 있다면 코드에 대해 더 많은 작업을 수행해야 할 수 있습니다.
 

## Google 직원이 코드 리뷰에서 찾는 것
 

코드 검토를 수행 할 때 Google은 엔지니어링 사례 문서에 따라 다음 요소에 중점을 둡니다.
 

> 디자인 : 코드가 잘 디자인되어 있고 시스템에 적합합니까? 이 변경 사항이 코드베이스 또는 라이브러리에 속합니까? 나머지 시스템과 잘 통합됩니까?

기능 : 코드가 작성자가 의도 한대로 작동합니까? 코드가 사용자에게 좋은 방식으로 작동합니까? 대부분의 경우 개발자가 코드 검토를받을 때까지 올바르게 작동 할만큼 충분히 CL을 테스트 할 것으로 기대합니다.

복잡성 : 코드를 더 간단하게 만들 수 있습니까? 다른 개발자가 나중에이 코드를 발견 할 때이 코드를 쉽게 이해하고 사용할 수 있습니까? 현재 사용 사례에 대해 과도하게 설계 되었습니까?

테스트 : 코드에 정확하고 잘 설계된 자동화 테스트가 있습니까? 코드가 손상되면 테스트가 실제로 실패합니까? 그들은 오탐을 일으키기 시작할까요? 각 테스트가 간단하고 유용한 주장을합니까?

이름 지정 : 개발자가 변수, 클래스, 메서드 등에 대한 명확한 이름을 선택 했습니까?

설명 : 설명이 명확하고 유용합니까? 현명한 댓글이 어떻게 작업이 진행되고 있는지 설명하는 부분이 있는지 확인합니다.

스타일 및 일관성 : 코드가 스타일 가이드를 따르나요?

문서 : 개발자가 관련 문서도 업데이트 했습니까?
 

Google에는 C ++, Swift, HTML / CSS, Lisp, JavaScript 등과 같은 여러 언어에 대한 스타일 가이드가 있습니다.
 

모든 사람이 참조 할 수있는 문서가 있으면 코드를 표준화하는 데 도움이됩니다.
 또한 검토 과정에서 기대되는 사항을 명확히하는 데 도움이됩니다.
 

## Google 직원이 코드를 검토하는 방법
 

Google의 엔지니어링 관행에는 코드 검토를위한 3 단계 프로세스가 있습니다.
 검토해야 할 경우 다루어야 할 사항 목록은 다음과 같습니다.
 

- 변경 사항에 대한 높은 수준의 개요보기
 
- 변경의 주요 부분 검토
 
- 나머지 코드를 합리적인 순서로 살펴보십시오.
 

각 단계를 더 자세히 살펴 보겠습니다.
 

## 1. 코드 변경에 대한 높은 수준의 개요보기
 

코드 변경의 설명 / 요약을보십시오.
 모두 이해가 되나요?
 예를 들어, 누군가 다음 주에 삭제 될 코드베이스를 변경하는 경우 변경 사항을 정중하게 푸시하고 변경이 더 이상 필요하지 않은 이유를 설명하십시오.
 

사람들이 실제로 필요하지 않은 작업에 시간을 소비하는 경우 비효율적이므로 개발 수명주기를 살펴보고 왜 이런 일이 발생하는지 확인하십시오.
 이러한 문제를 일찍 발견할수록 더 좋습니다.
 

코드에 대한 높은 수준의 개요를 얻으려면 코드 구성 요소를 간략하게 스캔하여 모두 함께 작동하는 방식을 확인하는 것이 좋습니다.
 

심각한 아키텍처 문제 또는 중대한 문제가 발견되면이 단계에서 즉시 관찰 내용을 공유해야합니다.
 리뷰의 다른 모든 요소를 검토 할 시간이 없더라도.
 나머지를 검토하는 것은 아키텍처 문제가 충분히 심각한 경우 시간 낭비가 될 수도 있습니다.
 

이 외에도 즉시 검토 의견을 보내야하는 두 가지 주요 이유가 있습니다.
 

- Google 직원은 종종 변경 사항을 이메일로 보낸 다음 해당 변경 사항에 따라 즉시 새 작업을 시작합니다.
 검토 변경 사항에 심각한 조정이 필요한 경우 크게 변경해야하는 항목을 기반으로 할 수 있습니다.
 
- CL에 대한 큰 변경은 완료하는 데 시간이 걸릴 수 있습니다.
 개발자는 모두 기한이 있으며 가능한 한 빨리 재 작업을 시작하도록하여 그들을 충족 시키도록 노력하는 것이 정중합니다.
 

## 2. 코드 변경의 주요 부분 검토
 

개요를 확인했으면 변경의 "주요"부분을 검토하십시오.
 

CL의 중심이되는 파일을 찾으십시오.
 종종 변경 사항이 가장 많은 파일이 하나 있으며 CL의 주요 부분입니다.
 

이 부분을 검토하는 데 대부분의 시간을 투자하십시오.
 이것은 모든 작은 조각에 대한 컨텍스트를 제공하고 일반적으로 검토를 더 빠르게 만듭니다.
 

CL이 너무 커서 좋은 개요를 얻고 흐름을 이해할 수 없다면 개발자가 CL을 더 작은 변경으로 분할해야하는 좋은 신호입니다.
 

## 3. 현명한 순서로 나머지 코드 살펴보기
 

변경 사항에 대한 개요를 확인했으면 세부 정보를 자세히 살펴보고 파일별로 살펴볼 차례입니다.
 

일반적으로 각 검토자는이 작업을 다르게 수행합니다.
 일부는 버전 제어가 표시하는 순서대로 이동하고 일부는 특정 순서를 선택합니다.
 당신에게 맞는 것을 선택하십시오.
 모든 것을 검토하고 아무것도 놓치지 않는 것이 중요합니다.
 

### 모든 코드 라인 검토
 

중요한 세부 사항을 놓치지 마십시오.
 때때로 구성 파일이나 생성 된 코드가있을 수 있으며 불규칙한 부분을 잠시 스캔 할 수 있습니다.
 그러나 여기서 당신의 일은 코드를 매우 철저하고 신중하게 면밀히 조사하는 것입니다.
 

버그, 경쟁 조건, 대체 접근 방식, 간결성, 가독성 등에 대해 생각해야합니다.
 

코드를 이해할 수없는 경우 다른 개발자도 이해하지 못할 가능성이 높으므로 개발자에게 설명을 요청해야합니다.
 

### 컨텍스트 이해
 

종종 버전 관리 소프트웨어는 변경된 줄만 표시합니다.
 그러나 변경 사항이 수행하는 작업을 정확히 이해하려면 앞뒤 줄 또는 전체 파일을 읽는 것이 중요합니다.
 

변경 사항에`if` 블록을 2 개 더 추가하는 사람 만 볼 수 있습니다.
 그러나 문맥을 살펴보면`if``else` 블록에 15 개의 다른`if`가 있음을 알 수 있습니다.
 그러면 코드 변경을 거부하고이 영역에서 코드 품질을 악화시키는 대신 적절하게 개선 할 수 있습니다.
 

코드 성능 저하는 모든 변경 사항에 대해 천천히 발생한다는 것을 기억하십시오. 우리의 주요 목표는 품질 추세를 일관되게 유지하는 것이며 결코 후퇴하지 않습니다.
 

## Google 직원이 코드 피드백을 작성하는 방법
 

Google에는 정중하고 정중하게 코드 검토를 수행하는 방법을 다루는 특정 섹션이 있습니다.
 이것은 개발자에게 가능한 한 명확하고 도움이되는 것에 반대하지 않습니다.
 여기서 황금률은 개발자가 아닌 코드에 대한 의견을 작성하는 것입니다.
 

## 해야 할 일 :
 

> 이유를 묻습니다. 저자가 특정 방식으로 일을하는 이유가 명확하지 않은 경우, 왜 특정 변경을했는지 물어보십시오.
 알지 못하는 것은 괜찮습니다.“왜”라고 묻는 것은 앞으로이 질문에 답하는 데 도움이 될 서면 기록을 남깁니다.
 (그리고 때때로“난 궁금합니다. 왜 그렇게하기로 결정 했습니까?”는 저자가 결정을 재고하는 데 도움이 될 수 있습니다.)
끝 찾기 : 깔끔한 것이 마음에 든다면 완벽해질 때까지 코드 검토를 반복해서 검토하고 필요 이상으로 길게 드래그하고 싶을 것입니다.
 하지만받는 사람에게는 영혼을 죽입니다.
 "LGTM"은 "내 불멸의 영혼이 결코 실패하지 않을 것임을 보증합니다"가 아니라 "나에게 잘 어울린다"는 의미입니다.
 괜찮아 보이면 계속 진행하십시오.
 (완벽하지 않아야한다는 의미는 아닙니다. 판단이 필요합니다.) 더 큰 리팩토링을 수행해야하는 경우 새 CL로 이동합니다.
 (출처)
 

## 하지 말아야 할 것
 

> 극단적이거나 매우 부정적인 언어를 사용하지 마세요. 검토중인 변경 사항이나 주변 코드에 관한 것이 든 "정상적인 사람은이 작업을 수행하지 않을 것"또는 "이 알고리즘이 끔찍합니다"와 같은 말을하지 마십시오.
 검토 대상자가 원하는 작업을 수행하도록 위협 할 수 있지만 장기적으로는 도움이되지 않습니다. 그들은 능력이 없다고 느끼고 개선하는 데 도움이 될 정보가 많지 않습니다.
 "좋은 시작이지만 약간의 작업이 필요할 수 있습니다."또는 "정리가 필요합니다."는 더 좋은 표현입니다.
 사람이 아닌 코드에 대해 토론하십시오.
자전거 타기 금지 :이 결정이 장기적으로 정말 중요한지, 아니면 주관적인 선호를 적용하고 있는지 항상 스스로에게 물어보십시오.
 옳다는 것은 기분이 좋지만 두 참가자 중 한 명만 해당 게임에서 이길 수 있습니다.
 중요하지 않은 경우 동의하지 않고 계속 진행하세요.
 (출처)
 

코드 리뷰는 때때로 칭찬이 아닌 코드로 문제 나 토론을 찾는 경향이 있습니다.
 

검토자가 귀하의 의견을 언급했거나 귀하가 좋아하는 최적화 또는 스마트 코드를 수행 한 경우 감사합니다.
 접근 방식이 마음에 들거나 그들이 문제를 어떻게 해결했는지 말하십시오.
 

반대로 검토자가 원하는 것을 철저히 설명하고 질문에 신속하게 답변하면 감사합니다.
 

리뷰어들이 내가 오해 한 것을 설명하는 엄청난 댓글을 남긴 리뷰를 몇 개 받았는데 그게 누구 였고 그들이 말한 내용을 여전히 기억할 수 있습니다.
 

## 코드 리뷰에서 푸시 백을 처리하는 방법
 

때때로 검토를받는 개발자가 제안하는 변경 사항에 동의하지 않을 수 있습니다.
 이를 처리하는 방법은 다음과 같습니다.
 

### 그들이 옳을 수 있다고 생각하십시오
 

때때로 개발자는 코드와 작동 방식에 더 가깝고 옳을 수 있습니다.
 그렇다면 해당 토론 지점에서 이동하고 해당 코드를 그대로 둡니다.
 

그러나 그들이 그렇지 않거나 무언가를 오해했다면, 당신은 변화를 주장해야합니다.
 개발자가 처음에 도전 한 내용에 응답하고 그 이유를 정중하게 설명하세요.
 

코드 품질 개선은 작은 단계에서 발생하는 경향이 있으며 검토는 발생하는 한 가지 방법입니다.
 개발자에게 추가 작업이 필요하더라도 코드 개선을 고집하십시오.
 

### "나중에 수정하겠습니다 ..."를 피하십시오.
 

리뷰에서 가장 일반적인 문제 중 하나는 사람들이 코드 변경이 필요한지 여부에 동의하지 않는 것이 아니라 다른 티켓으로 수행하거나 나중에 수행하고 싶다는 것입니다.
 따라서이 검토를 통과하면 나중에 후속 조치를 취하고 문제를 해결할 것이라고 확신합니다.
 

일반적으로 나중에 후속 조치는 거의 발생하지 않습니다.
 그렇다고 개발자 나 업무 윤리에 문제가 있다는 의미는 아닙니다.
 그러나 잊어 버리거나 우선 순위가 변경되거나 작업 대기열에서 길을 잃기 쉽습니다.
 

이제 작업이 끝났다고 주장하십시오.
 즉시 수정해야하는 코드베이스의 변경 사항을 병합하는 데있어 환상적인 이득은 없습니다.
 나중에 후속 조치를 취하거나 잊혀 질 수있는 기술 부채를 추가하는 것입니다.
 나중에 많은 티켓을 고치는 것은 품질을 떨어 뜨리는 쉬운 방법입니다.
 

이에 대한 유일한 예외는 심각한 문제가있는 경우 Google이 처리하는 가장 우선 순위가 높은 버그와 관련된 긴급 상황입니다.
 이는 서비스가 다운되거나 프로덕션에서 사람들의 페이지를 충돌시키는 오류 일 수 있습니다.
 

당연히 최대한 빨리 변경 사항을 병합하려는 열의가 있으며, 검토는 즉시 후속 수정 사항이 작성되면서 약간 낮은 품질을 받아 들일 수 있습니다.
 요점은 첫 번째 변경이 긴급 상황을 제거하고 두 번째 변경이이를 적절히 수정한다는 것입니다.
 

이것이 Google이 코드 검토 과정에서 사용하는 몇 가지 유용한 개념을 설명했기를 바랍니다.
 나는 이것을 내 마음에 더 잘 고착시키기 위해 이것을 썼고, 다른 회사가 QA 프로세스를 어떻게 처리하는지 궁금했습니다.
 

제가 수행 한 리뷰에 적용 할 수있는 몇 가지 포인트가 있다는 것을 알았습니다.
 

이 기사 전체에서 참조한 문서는 여기에서 찾을 수 있습니다.
 

이 기사를 재미있게보고 더보고 싶다면 트위터에 글을 공유합니다.
 