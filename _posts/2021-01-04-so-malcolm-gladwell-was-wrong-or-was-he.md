---
layout: post
title: "그럼 말콤 글래드웰이 데이터를 모두 잘못 이해한 건가요?"
author: 'Code Tower'
thumbnail: https://www.freecodecamp.org/news/content/images/size/w600/2020/12/analytics-3268935_640.png
tags: undefined
---


이 기사에서는 데이터 분석 및 프로 하키 분야에서 수행한 몇 가지 새로운 탐색에 대해 말씀드리겠습니다.

저는 최근에 데이터 분석 분야로의 정신나간 여정에 착수했습니다. 데이터 분석에 그렇게 열광적인 것은 없습니다. 명심하세요. 제 여정이 좀 이상하네요.

아시다시피, 저는 클라우드와 리눅스 관리 분야에서 훌륭한 경력을 쌓았지만, 개발자는 아닙니다. 그리고, 몇 가지 분명한 중복 외에도, 데이터는 행정과는 별개로 하나의 전체 우주입니다. 어느 정도 수준의 프로그래밍은 피할 수 없는 우주입니다.

하지만 제 작업의 일부분은 제가 기술의 큰 발전 추세를 잘 따라가야 한다고 요구합니다. 데이터는 거대합니다. 몇 년 동안 저는 현대 세계가 작동하게 만드는 숫자들을 가지고 노는 멋진 아이들을 봐왔고 솔직히 저는 질투가 납니다.

자, 갑니다. 저는 아주 낯선 지역을 헤집고 다니며 바보 같은 실수를 저지르고 재미있게 놀 거예요. 저와 같이 갈래요?

이 기사는 절대적인 기초부터 시작하지 않을 것이다. Python에서 여전히 첫 걸음을 떼고 싶다면, 이것을 확인해 보세요. 그리고 제가 사용하는 주피터 노트북과 같은 프로그래밍 환경을 어떻게 시작해야 하는지 알고 싶다면 여기를 보세요. 난 네가 이미 그 모든 것에 편하다고 생각할 거야.

## 스포츠에서 생일이 중요할까요?

먼저 다음과 같은 질문에 답하겠습니다.

> 만약 당신의 생일이 달력에 일찍 떨어진다면 당신은 엘리트 운동선수로 성공할 가능성이 더 높습니까?

참가자를 연령별로 나눠 12월 31일로 한 해를 자기도 모르게 끊는 유소년 스포츠가 하반기 선수들의 성공을 더 어렵게 만든다는 주장이 제기됐다. 왜냐하면 그들은 수 개월 더 나이가 많은 선수들과 경쟁하게 될 것이기 때문이다.

젊은 나이에, 그 달은 체력, 크기, 그리고 조정에 매우 큰 차이를 만들 수 있습니다. 만약 여러분이 더 강한 리그에서 더 나은 팀을 위해 재능에 투자하려는 마이너 리그 코치라면, 여러분은 누구를 선택할 건가요? 그리고 당신의 특별한 관심으로부터 장기적으로 누가 이익을 얻을까요?

유명한 작가이자 사상가, 캐나다 동료인 말콤 글래드웰이 등장하는 곳입니다. 글래드웰은 사실 이러한 통찰력의 원천이 아니었지만, 그는 가장 자주 그것과 관련이 있다.

오히려, 그러한 영광은 그가 참석하고 있던 엘리트 주니어 하키 경기에서 선수들 사이에 이상하게 분포된 생일 패턴을 알아챈 심리학자 로저 반즐리에게 돌아간다. 왜 그렇게 많은 재능 있는 운동선수들이 올해 초에 태어났을까? 글래드웰은 반즐리의 통찰력에 대해 그의 책 특이치에서 언급했는데, 내가 그것을 우연히 발견한 곳이었다.

하지만 그게 다 사실일까요? 반즐리의 관찰은 단지 흥미로운 추측이었나요, 아니면 실제 데이터가 그를 돋보이게 하나요?

## NHL은 데이터를 어디에 숨깁니까?

제 아이들 중 몇 명은 아직 10대이기 때문에 좋든 나쁘든 간에 저희 집에는 하키 팬덤의 긴 그림자를 피할 수 없습니다. 그런 것들에 대한 그들의 밑바닥 없는 욕구를 채우기 위해, 나는 내셔널 하키 리그가 유지하는 강력한 공식적이지만 문서화되지 않은 API의 존재를 발견했다. 다음 URL:

```undefined
https://statsapi.web.nhl.com/api/v1/teams/15/roster

```

예를 들어, 워싱턴 캐피털스의 현재 공식 명단을 포함하는 JSON 형식의 데이터 세트를 만들 것이다. URL의 15를 10으로 바꾸면 토론토 메이플 리프에 대해서도 같은 정보를 얻을 수 있다.

API의 일부와 같은 끝점이 많이 있습니다. 또한 이러한 엔드포인트 중 다수는 URL 확장 구문을 사용하여 수정할 수 있습니다.

> 재미있는 사실: NHL API 생성 웹 페이지에서 브라우저 탭의 사이트 아이콘을 보면 메이저리그 상표가 표시됩니다. 어쩌다 그런 일이 일어났죠?

## Python을 사용하여 NHL 통계를 스크래치하는 방법

그 모든 것을 알기에, 나는 각 팀의 선수 ID 번호에 대한 선수 명부의 끝점을 긁어내고, 그 ID들을 사용하여 각 선수의 고유한 끝점을 쿼리하고 그의 생년월일을 읽을 수 있었다. 그리고 나서 저는 각각의 NHL 플레이어에서 태어난 달을 팬더 데이터 프레임으로 추출하여 전체 세트를 계산하고 히스토그램으로 표시할 수 있었습니다.

여기 제가 그 모든 것을 실현하기 위해 쓴 코드가 있습니다. 자세한 얘기는 여기서 하지 않겠습니다. 나중에 그렇게 될 수도 있겠지만요.

```undefined
import pandas as pd
import requests
import json
import matplotlib.pyplot as plt
import numpy as np

df3 = pd.DataFrame(columns=['months'])
for team_id in range(1, 11, 1):
    url = 'https://statsapi.web.nhl.com/api/v1/teams/{}/roster'.format(team_id)
    r = requests.get(url)
    roster_data = r.json()
    df = pd.json_normalize(roster_data['roster'])
    for index, row in df.iterrows():
        newrow = row['person.id']
        url = 'https://statsapi.web.nhl.com/api/v1/people/{}'.format(newrow)
        newerdata = requests.get(url)
        player_stats = newerdata.json()
        birthday = (player_stats['people'][0]['birthDate'])
        newmonth = int(birthday.split('-')[1])
        df3 = df3.append({'months': newmonth}, ignore_index=True)
df3.months.hist()

```

다음으로 넘어가기 전에 몇 가지 메모를 추가해야 합니다.

- 이 코드를 얼마나 자주 사용하는지 주의하십시오. 에 대한/루프가 중첩되어 있으므로 스크립트를 한 번만 실행해도 1,000개 이상의 쿼리로 NHL의 API에 도달합니다. 그리고 그것은 모든 것이 제멋대로 진행된다고 가정하는 것입니다. 만약 여러분이 실수를 한다면, 여러분은 성가시게 하고 싶지 않은 사람들을 짜증나게 할 수도 있어요.
- 이 코드(1, 11, 1)는 NHL 30개 팀 중 11개 팀에서만 데이터를 추출한다. 어떤 이유로 특정 API 목록 끝점이 내 쿼리에 응답하지 못하고 실제로 스크립트를 충돌했습니다. 최대한 많은 데이터를 얻기 위해 스크립트를 여러 번 실행했습니다. 이게 그 중 첫 번째 주행이었어요. 직접 시도하려면 `df3 = pd를 제거하십시오.DataFrame(Columns=[`months`]`)은(는) 후속 반복에서 생성되므로 실수로 DataFrame 값을 0으로 재설정하지 않습니다.
- 데이터를 성공적으로 스크래치했으면 `df3.to_csvsplayer_data.csv`와 같은 것을 사용하여 데이터를 CSV 파일로 복사하면 원본 DataFrame이 손실되더라도 내용을 추가로 분석할 수 있습니다. API 오리진에 불필요한 로드는 피하는 것이 좋습니다.

## 원시 데이터를 시각화하는 방법

좋아, 내가 어디 있었지? 네. 현재 NHL 선수 1,100명의 생년월일을 기록한 제 데이터를 가지고 있는데, 어떻게 생겼는지 보고 싶습니다. 이제 더 이상 기다리지 마십시오. 모든 영광이 여기에 있습니다.

![image](https://www.freecodecamp.org/news/content/images/2020/12/hist1-1.png)

여기 뭐가 있지? 내가 보기에 1월 출산은 실제로 불균형적으로 많은 수의 선수를 차지하고 있지만, 12월 출산도 마찬가지이다. 전반적으로 글래드웰의 아이디어가 예측한 패턴을 보지 못했습니다. 아하! 화염에 휩싸였다. 절대로, 절대로 지식인을 믿지 마세요!

오류, 그렇게 빠르지 않아, 젊은이 이 히스토그램을 제대로 읽고 있습니까? 기억하기: 저는 이제 막 이 분야에서 시작하여 "직업"에 대해 배우고 있습니다.

기본 설정이 실제로 우리가 생각했던 것을 제공하지 않았을 수도 있습니다. 예를 들어, 12개월 동안의 출생빈도를 어떻게 측정하는지 알아두세요. 하지만 차트에는 단지 10개의 막대만 있습니다!

여기는 무슨 일이 벌어지고 있는 거지?

## 히스토그램은 우리에게 무엇을 말해주는가?

이 히스토그램 뒤에 있는 실제 숫자를 살펴보겠습니다. 이전에 `df3.to_csvplayer_data.csv`)를 사용하여 내보낸 CSV 파일을 로드하면 이러한 번호를 얻을 수 있습니다. 이 작업을 완료하는 방법은 다음과 같습니다.

```undefined
import pandas as pd
df = pd.read_csv('player_data.csv')
df['months'].value_counts()

```

제 결과물은 다음과 같습니다(열 머리글을 수동으로 추가했습니다).

```undefined
Month Frequecy
5     127
2     121
3     111
1     104
4      99
7      98
10     79
8      76
12     75
6      71
11     69
9      63

```

5월에 127명, 2월에 121명, 3월에 111명의 출산이 있었던 것 같습니다. 12월은 75밖에 없었다.

이런, 미안 말콤 좀 더 믿음을 가졌어야 했는데. 출생 빈도가 가장 높은 5개월이 1년 중 첫 5개월이라는 것을 알 수 있을까요? 글래드웰의 예측이 바로 그겁니다. 그럼 히스토그램은 어떻게 된 거죠?

다시 실행해 보겠습니다. 하지만 이번에는 기본값인 10이 아닌 12개의 빈을 지정하겠습니다.

```undefined
import pandas as pd
df = pd.read_csv('player_data.csv')
df.hist(column='months', bins=12);

```

"빈"은 실제로 데이터 집합 간의 통계적으로 적절한 구간의 근사치입니다. 빈은 실제 사용 중인 값을 가장 잘 나타내는 확률밀도함수(PDF)를 추측하려고 합니다. 그러나 특히 기본값을 사용할 때 사용자가 생각하는 방식으로는 표시되지 않을 수 있습니다. 다음은 12개의 빈을 사용하는 예입니다.

![image](https://www.freecodecamp.org/news/content/images/2020/12/hist2-1.png)

이것은 아마도 우리가 예상하는 방식으로 우리의 데이터를 정확하게 표현해 줄 것입니다. 저는 "아마도"라고 말하는데, 왜냐하면 제가 알지 못하는 것은 히스토그램이 빈을 나누는 방식에 약간의 특이점이 있을 수 있기 때문입니다.

## 작업에 적합한 도구를 사용해야 합니다.

하지만 이 보잘것없는 히스토그램은 실제로 우리의 요구에 대한 잘못된 시각화 도구였습니다.

히스토그램은 데이터 점을 빈으로 그룹화하여 빈도 분포를 표시하는 데 유용합니다. 이를 통해 세분화된 정밀도가 방해가 되는 대규모 데이터 세트의 상태를 빠르게 시각화할 수 있다. 하지만 우리와 같은 사용 사례에 대해서는 오해의 소지가 있습니다.

대신, `groupby`와 `count`의 주장을 통합한 평범한 오래된 막대 그래프를 보자.

```undefined
df.groupby('months').count().plot(kind='bar')
```

보다 직관적으로 신뢰할 수 있는 읽기 쉬운 기능을 제공하는 실행:

![image](https://www.freecodecamp.org/news/content/images/2020/12/bar1.png)

그게 더 낫지? 출생 월 빈도가 가장 높은 5개월이 연초임을 알 수 있다.

이 이야기의 교훈은? 데이터는 좋다. 히스토그램이 좋습니다. 하지만 그것들을 읽는 방법과 사용하는 시기를 아는 것도 좋습니다.

제 사이트 bootstrap-it.com에서 제공되는 책, 강좌, 기사 등의 형태로 행정의 우수성이 훨씬 더 많습니다.