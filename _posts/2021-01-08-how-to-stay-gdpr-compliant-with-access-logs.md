---
layout: post
title: "GDPR을 액세스 로그 준수 상태로 유지하는 방법"
author: 'Code Tower'
thumbnail: https://www.freecodecamp.org/news/content/images/size/w600/2021/01/privacy.jpg
tags: undefined
---


사생활은 복잡한 주제이다. 응용 프로그램 로그를 저장하는 데 사용되는 잘 알려진 방법이 새 개인 정보 보호 규정을 까다롭게 하는 것으로 밝혀졌다. 사실, 새로운 규정들은 IP 주소를 개인 식별자로 정의한다. 다른 사용자 식별자와 마찬가지로 주의하여 처리해야 합니다.

이 기사에서는 로깅을 개인 정보 보호용으로 만들기 위한 몇 가지 방법을 다루겠습니다.

먼저 GDPR의 기본 용어인 PII와 망각 사용자 권리를 알려드리겠습니다. 그 후, 우리는 웹 또는 애플리케이션 서버 로그 GDPR을 준비하기 위한 방법을 다룰 것이다.

그럼 제가 개발하고 있는 데이터벙커라는 오픈소스 제품과 그것이 어떻게 도움이 되는지에 대해 말씀드리겠습니다. 데이터벙커는 개인 기록을 보관하기 위한 스위스 군용 칼 도구이다.

## 일부 GDPR 관련 용어

### 개인 식별 가능 정보란?

GDPR은 PII 또는 개인 식별 가능 정보의 개념을 정의한다. 이것은 사람을 식별하는 데 도움이 되는 모든 정보일 수 있습니다.

예를 들어 사용자 이름, 주소, 전화 번호, 전자 메일 주소 또는 SSN일 수 있습니다. 브라우저 정보, IP 주소, 세션 쿠키 이름과 같은 약한 ID일 수도 있습니다.

삼각 측량처럼, 약한 정체성의 조합은 우리를 사용자로 이끌 수 있다. 강하고 약한 사용자 ID는 모두 PII로 간주됩니다.

GDPR은 개인이 자신의 개인 데이터를 삭제할 수 있는 권리를 도입한다. 사용자 또는 고객이 레코드를 삭제하라는 이메일을 보낼 수 있습니다. 이 요청에 응답하려면 한 달이 필요합니다.

### 로그 파일에 대한 망각 요청은 무엇을 의미합니까?

데이터베이스에서 사용자 데이터를 삭제하는 것은 쉽습니다. SQL을 사용할 수 있습니다. 로그 파일에서 사용자 PII를 삭제하는 것이 까다로운 부분입니다.

다른 서버에서 로그를 생성하고 다른 클라우드 서비스에 로그를 제공할 수 있습니다. 이 경우 레코드 삭제 수행 방법이 복잡해질 수 있습니다.

이 기사에서는 로깅을 개인 정보 보호를 위해 보다 지능적인 방법을 다루겠습니다.

### 데이터 벙커 소개

하지만 먼저, Databunker가 무엇이며 작동 방식에 대해 좀 더 자세히 알려드리겠습니다. 아래 몇 가지 방법에 대해 살펴보겠습니다.

![image](https://www.freecodecamp.org/news/content/images/2021/01/databunker-solution.png)

데이터벙커는 웹 및 모바일 앱을 위한 GDPR 호환 사용자 저장소 서비스이다. 백엔드 애플리케이션 서비스로 작동합니다. 이 제품은 여러 소프트웨어 개념이 하나로 합쳐진 조합입니다. 즉석에서 설계된 안전한 PII 스토리지 및 개인 정보 보호 기능을 제공합니다.

- PII(개인 식별 가능 정보) 저장소 및 볼트
- 웹 애플리케이션을 위한 안전한 세션 스토리지
- 고객을 위한 개인 정보 포털
- 애플리케이션 백엔드 서버
- DPO 관리 도구
- 토큰화 서비스
- 시크릿 소스

프로젝트 웹사이트: https://databunker.org/

Passport.js의 전체 작동 Node.js 예는 여기에서 확인할 수 있습니다. https://github.com/securitybunker/databunker-nodejs-example

## 방법 1: 자동 로그 보존 기간 사용

사용자 잊기 요청에 응답하려면 한 달이 필요합니다. 즉, 사용자 IP 주소를 필터링하는 등 모든 사용자 관련 레코드에서 로그 파일을 필터링할 수 있는 기간이 한 달 남았습니다.

또는 로그 보존 기간을 한 달로 제한할 수도 있습니다. 이전 로그 항목이 모두 제거됩니다. 이렇게 하면 로그 보존 기간의 일회성 구성 외에 다른 작업을 수행할 필요가 없습니다.

## 방법 2: 모든 로그 준수 문제를 해결하기 위해 가명화를 사용합니다.

GDPR은 가명화의 개념을 논의한다. 이 방법은 가명 용어의 사용에 기초할 것입니다. GDPR 제4조 제5항:

> '정보화'란 추가 정보가 별도로 보관되고 개인 데이터가 확실히 존재함을 보장하기 위한 기술적 및 조직적 조치에 따르는 경우, 추가 정보를 사용하지 않고 개인 데이터가 더 이상 특정 데이터 대상에 귀속될 수 없는 방식으로 개인 데이터를 처리하는 것을 의미한다.그것은 신원이 확인되거나 확인 가능한 자연인에게 귀속된다.

개인 데이터를 별도의 데이터베이스에 보관할 수 있습니다(예: 데이터 벙커). 사용자의 잊기 요청을 받으면 로그 파일은 변경되지 않은 채 데이터 벙커에서 사용자의 개인 데이터를 삭제합니다.

생활을 더욱 편리하게 하기 위해 각 로그 줄에 사용자 세션과 사용자 토큰을 인쇄할 수 있습니다.

이 예제를 참조하여 참조할 수 있습니다.

> ::fff:141.226.198.55 - [02/2021:18:42:54 +0000] "GET /user/me HTTP/1.1" 304 - "http://my-dev-site/user/login" "Mozilla/5.0(Windows NT 10.0; Win64; Applekit)

이것은 로그 줄 끝에 두 개의 사용자 지정 변수를 추가함으로써 일반 웹 서버 로그와 다릅니다.

"B994fdbf-694e-4289-b8db-04d8049da2e8"은 데이터벙커 세션 라이브러리에서 생성된 세션 토큰이다.

"1f587eb7-eaa-1629-c108-b707d99798da"는 로그인한 사용자의 토큰이다. 이 토큰은 Datafunker에서 사용자를 생성할 때 생성된 사용자 토큰입니다.

## 방법 3: 높은 보안 환경을 위한 솔루션

이 방법에는 로그 이벤트에 대한 부분 암호화가 포함됩니다. 로그 이벤트에서 발견된 PII는 함께 그룹화되어 암호화됩니다. 초기 설정에는 각 사용자에 대한 로그 입력 암호의 1회 생성이 포함됩니다. 예를 들어 이 암호는 Databunker에 저장된 사용자 프로필에 저장할 수 있습니다.

레코드의 암호를 해독하려면 레코드 소유자가 누구인지 알아야 하므로 암호화된 PII와 함께 사용자 ID를 저장해야 합니다. 따라서 일반 암호와 함께 다른 수준의 암호화가 사용됩니다.

사용자 식별 로그 이벤트의 경우 PII가 두 번 암호화됩니다. 사용자의 로그 입력 암호를 사용하여 데이터를 처음으로 암호화하는 경우. 두 번째에는 기본 암호로 암호화되어 식별된 사용자 ID를 숨깁니다.

식별된 사용자의 경우:

```undefined
const piiPayload = JSON.stringify({ClientIP, BrowserUserAgent, SessionID});
coast piiEncrypted = Encrypt(UserPassword, piiPayload);
const linePayload = JSON.stringify({UserToken, data: btoa(piiEncrypted)});
const encrypted = Encrypt(GenericPassword, linePayload);

```

사용자를 알 수 없는 경우 다음과 같은 한 단계의 암호화만 사용할 수 있습니다.

```undefined
const piiPayload = JSON.stringify({ClientIP, BrowserUserAgent, SessionID});
const encrypted = Encrypt(GenericPassword, piiPayload);

```

사용자의 잊기 요청을 받으면, 사용자의 로그 항목 암호와 데이터 벙커에 저장된 프로파일을 제거할 수 있습니다. 이렇게 하면 사용자 로그 항목을 복구할 수 없게 됩니다. 이는 완전히 정상이며 GDPR 요건을 충족한다. 따라서 로그 파일에서 모든 항목을 제거하기 위한 추가 작업이 필요하지 않습니다.

## 요약

올바른 아키텍처를 통해 로깅 개인 정보를 준수하도록 할 수 있습니다. 그것은 복잡하지 않다. Databunker를 사용하거나 직접 솔루션을 롤링할 수 있습니다.

이 문제를 완전히 무시하고 로그 파일에서 사용자 레코드를 수동으로 제거하는 것보다 훨씬 좋습니다.

### 프리 테이크 어웨이

저는 스타트업 창업자와 건축가들을 위한 개인 정보 교육을 운영하고 있습니다. 여기서는 완전히 무료로 이용할 수 있습니다.

### 작성자 정보

율리 스트레모프스키(Yuli Stremovsky)는 세계적인 소프트웨어 및 보안 설계자이다. PrivacyBunker.io 및 DataBunker.org 개인 정보 보호 제품의 설립자. 이전 Checkpoint 및 RSA Security 직원입니다. 기술 솔루션을 개인 정보와 결혼시키는 데 전문가입니다.